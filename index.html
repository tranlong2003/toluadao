<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>Check L·ª´a ƒê·∫£o</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:#0b1020;color:#f6f7fb;min-height:100svh;display:grid;place-items:center;overflow-x:hidden}
.orb{position:fixed;border-radius:50%;filter:blur(120px);opacity:.35;z-index:0}
.o1{width:460px;height:460px;background:#8b5cf6;left:-120px;top:-120px;animation:float 20s linear infinite}
.o2{width:520px;height:520px;background:#06b6d4;right:-160px;bottom:-160px;animation:float 26s linear infinite reverse}
@keyframes float{0%{transform:translateY(0) rotate(0)}50%{transform:translateY(-40px) rotate(180deg)}100%{transform:translateY(0) rotate(360deg)}}
.wrap{position:relative;z-index:1;width:min(980px,94%);margin:6vh auto}
.header{display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:44px;height:44px;border-radius:14px;background:conic-gradient(from 180deg at 50% 50%,#22d3ee, #a78bfa, #22d3ee);box-shadow:0 10px 30px rgba(167,139,250,.3)}
.title{font-weight:800;font-size:40px;text-align:center;background:linear-gradient(90deg,#22d3ee,#a78bfa);-webkit-background-clip:text;color:transparent}
.card{background:rgba(255,255,255,.06);backdrop-filter:blur(14px);border:1px solid rgba(255,255,255,.15);border-radius:22px;box-shadow:0 20px 60px rgba(0,0,0,.35);padding:16px;margin-top:16px;position:relative;overflow:hidden;}
.search{padding:24px}
.row{display:flex;gap:10px}
input,select,button{border-radius:12px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.06);color:#fff;outline:none}
input::placeholder{color:#c6c9d3}
input,select{padding:12px 14px}
button{padding:12px 18px;font-weight:700;cursor:pointer;transition:.25s;background:linear-gradient(90deg,#22d3ee,#a78bfa);border:none}
button:hover{transform:translateY(-1px);box-shadow:0 8px 26px rgba(34,211,238,.35)}
.hint{opacity:.7;font-size:12px;margin-top:8px}
.grid{display:grid;grid-template-columns:1.4fr .9fr;gap:16px;margin-top:16px;padding:16px}
.panel{padding:18px;border-radius:18px}
.tag{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;font-size:12px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15)}
.level{font-size:28px;font-weight:800;margin-top:6px}
.safe{color:#22d3ee} .warn{color:#f59e0b} .danger{color:#fb7185}
.stat{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:14px}
.stat .box{padding:12px;border-radius:14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);text-align:center}
.list{display:flex;flex-direction:column;gap:12px;margin-top:12px;max-height:380px;overflow:auto}
.item{padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);transition:transform 0.25s ease,box-shadow 0.25s ease}
.item:hover{transform:translateY(-6px);box-shadow:0 12px 24px rgba(0,0,0,0.25);}
.item a{color:#93c5fd;text-decoration:none}
.item a:hover{text-decoration:underline}
.time{opacity:.7;font-size:12px}
.fadeIn{animation:fade .45s ease-in-out}
@keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
@media (max-width:920px){.grid{grid-template-columns:1fr;}}
select { background: #181f36; color: #fff; border: 1px solid #22d3ee; transition: box-shadow 0.18s, border-color 0.18s; padding: 12px 14px; border-radius: 12px; font-size: 16px;}
select:focus { outline: none; border-color: #a78bfa; box-shadow: 0 0 0 2px #a78bfa55; }
option { background: #181f36; color: #22d3ee; }
.floating-tg-btn { position: fixed; right: 28px; bottom: 28px; z-index: 100; width: 56px; height: 56px; border-radius: 50%; font-size: 30px; background: linear-gradient(135deg, #22d3ee 60%, #229ED9 100%); box-shadow: 0 6px 32px rgba(34,158,217,0.25); display: flex; align-items: center; justify-content: center; animation: bounce 1.2s infinite; transition: transform 0.18s, box-shadow 0.18s;}
.floating-tg-btn:hover { transform: scale(1.13) rotate(-8deg); box-shadow: 0 12px 36px rgba(34,158,217,0.35); animation: none; }
@keyframes bounce {0%,100%{transform:translateY(0);}20%{transform:translateY(-8px);}40%{transform:translateY(0);}60%{transform:translateY(-4px);}80%{transform:translateY(0);}}
.floating-tg-btn svg, .floating-tg-btn img { display: block; }
@media (max-width: 600px) { .floating-tg-btn { right: 14px; bottom: 14px; width: 48px; height: 48px; } }
.news-item { padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.05); margin-bottom:8px; transition: transform 0.25s ease, box-shadow 0.25s ease;}
.news-item:hover { transform:translateY(-6px); box-shadow:0 12px 24px rgba(0,0,0,0.25); }

/* Gradient ƒë·ªông cho qu·∫£ng c√°o */
.card.fadeIn.ad-card {
  background: linear-gradient(135deg, #22d3ee, #a78bfa, #f472b6, #facc15);
  background-size: 400% 400%;
  animation: gradientMove 12s ease infinite;
  border:1px solid rgba(255,255,255,0.2);
  box-shadow:0 8px 32px rgba(0,0,0,0.25);
}
@keyframes gradientMove{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}
.ad-list li a {
  padding:6px 12px;
  border-radius:12px;
  display:inline-block;
  background:rgba(255,255,255,0.15);
  color:#fff;
  text-decoration:none;
  font-weight:600;
  transition:0.3s;
}
.ad-list li a:hover {
  background:rgba(255,255,255,0.3);
  color:#fffb00;
  transform:scale(1.05);
  text-shadow:0 0 6px #fff;
}
.footer{
  background: linear-gradient(90deg, #6b21a8, #db2777, #f97316);
  color:#fff;
  font-weight:500;
}
/* Card ki·ªÉu k√≠nh m·ªù sang tr·ªçng */
.trusted-card {
  margin-top: 20px;
  padding: 20px;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  text-align: center;
  position: relative;
  overflow: hidden;
}
/* Hi·ªáu ·ª©ng vi·ªÅn gradient ƒë·ªông */
.trusted-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 20px;
  padding: 2px;
  background: linear-gradient(135deg, #facc15, #f472b6, #60a5fa, #34d399, #fb923c);
  background-size: 400% 400%;
  animation: borderMove 8s ease infinite;
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
}
@keyframes borderMove { 0%{background-position:0% 50%;} 50%{background-position:100% 50%;} 100%{background-position:0% 50%;} }
/* List link */
.trusted-list { margin-top: 15px; display: flex; justify-content: center; gap: 18px; flex-wrap: wrap; }
.trusted-list li { list-style: none; }
.trusted-list li a {
  padding: 12px 22px; border-radius: 14px; background: linear-gradient(135deg, #1e293b, #334155);
  color: #fff; font-weight: 600; text-decoration: none; transition: 0.3s; display: flex; align-items: center; gap: 8px;
  position: relative; overflow: hidden;
}
/* Hover hi·ªáu ·ª©ng */
.trusted-list li a:hover { background: linear-gradient(135deg, #3b82f6, #9333ea); color: #facc15; transform: translateY(-3px) scale(1.05); box-shadow: 0 4px 16px rgba(250, 204, 21, 0.4); }
/* Hi·ªáu ·ª©ng khi click */
.trusted-list li a:active { transform: scale(0.95); box-shadow: 0 0 12px rgba(255, 255, 255, 0.6); }
/* Hi·ªáu ·ª©ng ripple khi click */
.trusted-list li a::after {
  content: ""; position: absolute; border-radius: 50%; transform: scale(0); background: rgba(255, 255, 255, 0.3);
  width: 100px; height: 100px; top: var(--y); left: var(--x); pointer-events: none; transition: transform 0.5s ease, opacity 1s ease;
}
.trusted-list li a:active::after { transform: scale(3); opacity: 0; }
</style>
</head>
<body>
<div class="orb o1"></div>
<div class="orb o2"></div>

<div class="wrap">
  <div class="header">
    <div class="brand">
      <div class="logo"></div>
      <div class="title">Check L·ª´a ƒê·∫£o</div>
    </div>
  </div>

  <div class="card search fadeIn">
    <div class="row">
      <select id="type">
        <option value="phone">S·ªë ƒëi·ªán tho·∫°i</option>
        <option value="bank">S·ªë t√†i kho·∫£n</option>
        <option value="link">Link Facebook</option>
      </select>
      <input id="value" placeholder="Nh·∫≠p SƒêT / STK / link c√¥ng khai..." />
      <button onclick="doSearch()">Ki·ªÉm tra</button>
      <button class="report-btn"  onclick="openReportForm()"  >T·ªë c√°o l·ª´a ƒë·∫£o</button>
      <script>
        function openReportForm(){
  window.location.href = "toluadao.html";
}

      </script>       
<!-- ...existing code... -->

<style>
/* ...existing code... */
.report-btn {
  background: linear-gradient(90deg, #fb7185, #f59e0b);
  color: #fff;
  border: none; 
  font-weight: 700;
  padding: 12px 18px;
  border-radius: 12px;
  margin-left: 70px;
  cursor: pointer;
  box-shadow: 0 4px 18px rgba(251,113,133,0.18);
  transition: 0.22s;
}
.report-btn:hover {
  background: linear-gradient(90deg, #f59e0b, #fb7185);
  color: #fff700;
  transform: translateY(-2px) scale(1.04);
  box-shadow: 0 8px 32px rgba(251,113,133,0.28);
}
/* ...existing code... */
</style>
      </a>
    </div>
    <div class="hint">* K·∫øt qu·∫£ t·ªïng h·ª£p t·ª´ nhi·ªÅu ngu·ªìn c√¥ng khai (n·∫øu c√≥), ch·ªâ mang t√≠nh tham kh·∫£o.</div>
  </div>
  <div id="result" class="grid" style="display:none">
    <div class="card panel fadeIn">
      <div class="tag">üì∞ B√†i ph·ªët t·ª´ nhi·ªÅu ngu·ªìn</div>
      <div id="evidences" class="list"></div>
    </div>
    <div class="card panel fadeIn">
      <div class="tag">üõ°Ô∏è M·ª©c ƒë·ªô r·ªßi ro</div>
      <div id="level" class="level safe">An to√†n</div>
      <div class="stat">
        <div class="box"><div>T·ªïng b√†i</div><div id="stat-total" style="font-weight:800;font-size:18px">0</div></div>
        <div class="box"><div>C·ªông ƒë·ªìng</div><div id="stat-community" style="font-weight:800;font-size:18px">0</div></div>
        <div class="box"><div>M·ªõi nh·∫•t</div><div id="stat-last" style="font-weight:800;font-size:18px">‚Äî</div></div>
      </div>
    </div>
  </div>

  <div id="news-list"></div>

  <!-- Qu·∫£ng c√°o web uy t√≠n -->
  <div class="trusted-card">
    <div class="tag">üåê Web uy t√≠n</div>
    <ul class="trusted-list">
      <li><a href="" target="_blank"><i class="fas fa-wallet"></i> PR web</a></li>
      <li><a href="https://baokiemtra.vn" target="_blank"><i class="fas fa-shield-alt"></i> PR web</a></li>
      <li><a href="https://thongtindangky.vn" target="_blank"><i class="fas fa-id-card"></i> PR web</a></li>
    </ul>
  </div>

  <script>
  document.querySelectorAll(".trusted-list li a").forEach(btn => {
    btn.addEventListener("click", function(e) {
      let rect = btn.getBoundingClientRect();
      btn.style.setProperty("--x", (e.clientX - rect.left - 50) + "px");
      btn.style.setProperty("--y", (e.clientY - rect.top - 50) + "px");
    });
  });
  </script>

  <!-- Footer -->
  <div class="card fadeIn footer" style="text-align:center;font-size:14px;opacity:.85;margin-top:12px;">
    ¬© 2025 ƒê√¢y l√† h·ªá th·ªëng Check L·ª´a ƒê·∫£o. T·∫•t C·∫£ th√¥ng tin ƒë·ªÅu l√† ch√≠nh x√°c v√† c√≥ cƒÉn c·ª© theo c√°c d·ªØ li·ªáu ·ªü ƒëa d·∫°ng ngu·ªìn c√¥ng khai. Ch√∫ng t√¥i kh√¥ng ch·ªãu tr√°ch nhi·ªám v·ªÅ c√°c h√†nh vi l·ª´a ƒë·∫£o x·∫£y ra t·ª´ vi·ªác s·ª≠ d·ª•ng th√¥ng tin n√†y.
  </div>
</div>

<a href="https://t.me/tradenewbdi" class="floating-tg-btn" target="_blank" rel="noopener" title="Tham gia nh√≥m Telegram">
  <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" style="width:32px;height:32px;display:block;">
</a>
<!-- Ng∆∞·ªùi d√πng -->
  <div class="trusted-card" 
  > Ng∆∞·ªùi d√πng: <span id="total-users">1.324</span> | Online: <span id="online-users">241</span>
  </div>
</div>
<script>
let newsDatabase = []; 
let daHien = new Set();      // d√πng cho evidences (reset m·ªói l·∫ßn render)
let newsKeys = new Set();    // tr√°nh tr√πng trong news-list (t√≠ch l≈©y)

// Hi·ªÉn th·ªã 1 item tin ng·∫Øn ·ªü khu v·ª±c news-list (tr√°nh tr√πng)
function addNewsItem(news){
  const container = document.getElementById('news-list');
  const key = (news.url || '') + '|' + news.title + '|' + news.date;
  if (newsKeys.has(key)) return;
  newsKeys.add(key);

  const item = document.createElement('div');
  item.className = 'news-item';
  item.innerHTML = `<b>${news.title}</b><div>${news.content}</div><small>${news.date}</small>`;
  container.prepend(item); 
  newsDatabase.unshift(news); 
}

// H√†m hi·ªÉn th·ªã b√†i ph·ªët v√†o #evidences, lo·∫°i tr√πng theo URL trong m·ªôt l·∫ßn render
function hienThiBaiBao(data) {
  const resultsDiv = document.getElementById("evidences");
  resultsDiv.innerHTML = "";
  daHien.clear(); // ƒë·∫£m b·∫£o ch·ªâ lo·∫°i tr√πng trong batch hi·ªán t·∫°i

  data.forEach(item => {
    const key = item.url || (item.title + '|' + item.source);
    if (!daHien.has(key)) {
      daHien.add(key);

      let div = document.createElement("div");
      div.classList.add("item");
      div.innerHTML = `
        <div style="font-weight:700">${item.title}</div>
        <div style="opacity:.9;margin:6px 0">${item.excerpt}</div>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="opacity:.8">Ngu·ªìn: ${item.source}</div>
          <a href="${item.url}" target="_blank" rel="noopener">ƒê·ªçc b√†i g·ªëc ‚Üó</a>
        </div>`;
      resultsDiv.appendChild(div);
    }
  });
}

async function doSearch() {
  const type = document.getElementById('type').value;
  const value = document.getElementById('value').value.trim();

  // Ki·ªÉm tra h·ª£p l·ªá
  if (!value) { alert("Ch∆∞a nh·∫≠p gi√° tr·ªã c·∫ßn tra k√¨a m·∫•y b·ªëüëåüëå "); return; }
  if (type === "phone" && !/^0\d{9}$/.test(value)) { alert("Vui l√≤ng nh·∫≠p ƒë√∫ng ƒë·ªãnh d·∫°ng s·ªë ƒëi·ªán tho·∫°i Vi·ªát Nam (10 s·ªë, b·∫Øt ƒë·∫ßu b·∫±ng 0)"); return; }
  if (type === "bank" && !/^\d{4,16}$/.test(value)) { alert("Vui l√≤ng nh·∫≠p ƒë√∫ng s·ªë t√†i kho·∫£n (4-16 s·ªë)"); return; }
  if (type === "link") {
    try { new URL(value); } catch { alert("Vui l√≤ng nh·∫≠p ƒë√∫ng ƒë·ªãnh d·∫°ng li√™n k·∫øt (URL)"); return; }
  }

  document.getElementById('result').style.display='grid';

  // D·ªØ li·ªáu m·∫´u
  const sample = [
    {title:"C·∫£nh b√°o l·ª´a ƒë·∫£o qua STK", excerpt:"Ng∆∞·ªùi b√°n y√™u c·∫ßu ƒë·∫∑t c·ªçc...", source:"Forum A", url:"#1", published_at:new Date()},
    {title:"Zalo gi·∫£ m·∫°o b·∫°n b√® xin ti·ªÅn", excerpt:"T√†i kho·∫£n Zalo l·∫° t·ª± x∆∞ng...", source:"Blog B", url:"#2", published_at:new Date(new Date()-86400000)},
    {title:"Zalo gi·∫£ m·∫°o b·∫°n b√® xin ti·ªÅn", excerpt:"B·∫£n tr√πng ƒë·ªÉ test dedup", source:"Blog B", url:"#2", published_at:new Date()}
  ];

  /// 1) Khi b·∫•m "Ki·ªÉm tra"
async function doSearch() {
  const type = document.getElementById('type').value;
  const value = document.getElementById('value').value.trim();

  // validate nh∆∞ b·∫°n ƒë√£ l√†m...

  // CLEAR k·∫øt qu·∫£ c≈© (ch·ªëng l·∫∑p UI)
  const evidencesEl = document.getElementById('evidences');
  evidencesEl.innerHTML = '';
  document.getElementById('news-list').innerHTML = '';

  // call API
  const res = await fetch(`api/search.php?type=${encodeURIComponent(type)}&value=${encodeURIComponent(value)}`);
  const data = await res.json();

  // hi·ªán th·ªëng k√™
  document.getElementById('result').style.display='grid';
  const levelEl=document.getElementById('level');

  if (data.stats.total === 0) {
    levelEl.textContent = 'An to√†n / Ch∆∞a th·∫•y b√°o c√°o';
    levelEl.className = 'level safe';
    document.getElementById('stat-total').textContent = 0;
    document.getElementById('stat-community').textContent = 0;
    document.getElementById('stat-last').textContent = '‚Äî';
    evidencesEl.innerHTML = '<div class="item">Ch∆∞a t√¨m th·∫•y b√†i ph·ªët c√¥ng khai tr√πng kh·ªõp.</div>';
    return;
  }

  // ƒë√°nh gi√° m·ª©c ƒë·ªô (demo ƒë∆°n gi·∫£n)
  levelEl.textContent = data.stats.from_reports > 0 ? 'Nguy c∆° cao' : 'Nghi v·∫•n';
  levelEl.className = 'level ' + (data.stats.from_reports > 0 ? 'danger' : 'warn');

  document.getElementById('stat-total').textContent = data.stats.total;
  document.getElementById('stat-community').textContent = data.stats.from_reports;
  document.getElementById('stat-last').textContent = data.stats.last ? new Date(data.stats.last).toLocaleDateString('vi-VN') : '‚Äî';

  // render evidences (ƒë√£ ƒë∆∞·ª£c API ch·ªëng tr√πng)
  data.evidences.forEach(ev=>{
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <div style="display:flex;justify-content:space-between;gap:8px">
        <div style="font-weight:700">${ev.title}</div>
        <div class="time">${ev.published_at ? new Date(ev.published_at).toLocaleDateString('vi-VN') : ''}</div>
      </div>
      <div style="opacity:.9;margin:6px 0">${ev.excerpt || ''}</div>
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="opacity:.8">Ngu·ªìn: ${ev.source || ev.origin}</div>
        ${ev.url ? `<a href="${ev.url}" target="_blank" rel="noopener">ƒê·ªçc b√†i g·ªëc ‚Üó</a>` : ''}
      </div>`;
    evidencesEl.appendChild(div);
  });
}

// 2) G·ª≠i t·ªë c√°o (form ‚ö†Ô∏è)
async function submitReport() {
  const report = {
    type: document.getElementById('report-type').value,
    value: document.getElementById('report-value').value.trim(),
    title: document.getElementById('report-title').value.trim(),
    excerpt: document.getElementById('report-excerpt').value.trim(),
    source: document.getElementById('report-source').value.trim(),
    url: document.getElementById('report-url').value.trim(),
  };
  const res = await fetch('api/report_add.php', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify(report)
  });
  const ok = await res.json();
  const msg = document.getElementById('report-msg');
  if (ok.success) {
    msg.textContent = '‚úÖ G·ª≠i b√°o c√°o th√†nh c√¥ng!';
    msg.className = 'success';
  } else {
    msg.textContent = '‚ùå L·ªói: ' + (ok.msg || 'kh√¥ng r√µ');
    msg.className = '';
  }
}

// 3) L·∫•y l·ªãch s·ª≠ g·∫ßn ƒë√¢y khi load trang (ho·∫∑c sau m·ªói search th√†nh c√¥ng)
async function loadRecentHistory() {
  const h = await fetch('api/history_recent.php?limit=10').then(r=>r.json());
  const box = document.getElementById('history');
  if (!box) return;
  box.innerHTML = '';
  h.forEach(row=>{
    const div = document.createElement('div');
    div.className='history-item';
    div.textContent = `[${row.type}] ${row.value} ‚Äî ${new Date(row.created_at).toLocaleString('vi-VN')}`;
    div.onclick = ()=>{
      document.getElementById('type').value = row.type;
      document.getElementById('value').value = row.value;
      doSearch();
    };
    box.appendChild(div);
  });
}
window.addEventListener('DOMContentLoaded', loadRecentHistory);
}

</script>
</body>
</html>

